ุจุงูุทุจุน! ุฅููู **ุดุฑุญ ูุจุณุท ุฌุฏูุง** ููุณู **NTP (Network Time Protocol)** โ ุจุทุฑููุฉ ุณููุฉุ ููุทููุฉุ ูุนูููุฉุ ููุฃูู ุจุชุณูุนูุง ูู ุตุฏูู ุฎุจูุฑ ๐:

---

### โฐ ููู ููุชู ุจุชูููุช ุงูุฃุฌูุฒุฉ ูู ุงูุดุจูุฉุ

ุชุฎูู ุงูุขุชู:
- ุญุตู ุนุทู ูู ุงูุดุจูุฉ.
- ุงูุฑุงูุชุฑ ุณุฌูู ุงูุญุฏุซ ุงูุณุงุนุฉ **10:05**.
- ุงูุณููุชุด ุณุฌููู ุงูุณุงุนุฉ **10:02**.
- ุงูุณูุฑูุฑ ุณุฌููู ุงูุณุงุนุฉ **10:07**.

โ ูุด ูุชุนุฑู:  
**ููู ุญุตู ุฃูููุงุ**  
**ุฅูู ุงูุณุจุจ ุงูุญููููุ**  
**ููู ุญุตูุช ุงููุดููุฉุ**

> โ ุงูุญู:  
> **ุชุฒุงูู ุงูููุช ุนูู ูู ุงูุฃุฌูุฒุฉ** โ ุนูุดุงู ุชูุฏุฑ ุชูุฑุฃ ุงูุณุฌูุงุช (Logs) ุจุฏูุฉุ ูุชุนุฑู ุงูุชุฑุชูุจ ุงูุญูููู ููุฃุญุฏุงุซ.

---

### ๐ฐ ุทุฑููุชุงู ูุถุจุท ุงูููุช:

#### 1. โ๏ธ ุงูุทุฑููุฉ ุงููุฏููุฉ (ุบูุฑ ููุงุณุจุฉ ููุดุจูุงุช ุงููุจูุฑุฉ):
```bash
R1# clock set 20:36:00 nov 15 2019
```
- ูุนูู: "ุฎูู ุงูููุช ุฏูููุชู ูุฐุง".
- โ ุณูู ูู ุฌูุงุฒ ูุงุญุฏ.
- โ **ูุด ุนููู** ูู ุนูุฏู 50 ุฌูุงุฒ โ ููุณุชุญูู ุชุถูู ุฅููู ูููู ููุญุฏูุซูู ุจููุณ ุงููุญุธุฉ.

#### 2. ๐ ุงูุทุฑููุฉ ุงูุฐููุฉ: ุงุณุชุฎุฏู **NTP**  
> ุงุฎุชุตุงุฑ: **N**etwork **T**ime **P**rotocol  
> โ ุจุฑูุชูููู **ููุฒูุน ุงูููุช ุงูุฏููู** ุนูู ูู ุฃุฌูุฒุฉ ุงูุดุจูุฉ ุชููุงุฆููุง โ

- ูุนูู ุนูู **UDP port 123**.
- ูุนูุงุฑ ููุงุณู (ููุฌูุฏ ูู ูู ุฃุฌูุฒุฉ ุงูุดุจูุงุช ุงูุญุฏูุซุฉ).
- ุฏููู ุฌุฏูุง (ูุฑู ุฃุฌุฒุงุก ูู ุงูุซุงููุฉ!).

---

### ๐งฑ ููุฑุฉ NTP: ูุธุงู "ุงูุทุจูุงุช" (Stratum Hierarchy)

ุชุฎูู NTP ูู **ูุฑู** โ ูููุง ูุฒูุช ูู ุงููุฑูุ ูู ุงูุฏูุฉ ุดููุฉ (ุจุณ ูุง ูุฒุงู ุฏููู ุฌุฏูุง):

| ุงูุทุจูุฉ (Stratum) | ุงููุตู | ูุซุงู |
|------------------|-------|------|
| **Stratum 0** | ูุตุฏุฑ ุงูููุช ุงูุฃุณุงุณู โ **ุบูุฑ ูุชุตู ุจุงูุดุจูุฉ ูุจุงุดุฑุฉู** | ุณุงุนุฉ ุฐุฑูุฉ โ๏ธุ GPS ๐ฐ๏ธุ ุณุงุนุฉ ูุนูู ุฏููู |
| **Stratum 1** | ุฃุฌูุฒุฉ **ูุชุตูุฉ ูุจุงุดุฑุฉู** ุจูุตุฏุฑ Stratum 0 โ ุจุชุนูู "ุจูุงุจุฉ" ููููุช | ุณูุฑูุฑ ููุช ูุชุตู ุจุฌูุงุฒ GPS |
| **Stratum 2** | ุฃุฌูุฒุฉ ุจุชุงุฎุฏ ุงูููุช ูู Stratum 1 (ูุซู ุฑุงูุชุฑุงุชู ุฃู ุณูุฑูุฑุงุชู) | ุฑุงูุชุฑ `R1` ูุชุตู ุจู Stratum 1 |
| **Stratum 3** | ุฃุฌูุฒุฉ ุจุชุงุฎุฏ ูู Stratum 2 | ุณููุชุด `S1` ูุชุตู ุจู `R1` |
| โฎ | ูููุฐุงโฆ | |
| **Stratum 15** | ุขุฎุฑ ุทุจูุฉ ููุจููุฉ | |
| **Stratum 16** | โ **ููุช ุบูุฑ ูุชุฒุงูู** โ ูุนูู ุงูุฌูุงุฒ ูุง ูุงูุด ูุตุฏุฑ ููุช |

> ๐ก ูุนูููุฉ ูููุฉ:  
> Stratum **ูุง ุจููุฏุฑุด** ูุฑุฌุน ูุฃุนูู (ูุซูุงู Stratum 2 ูุง ููุฏุฑุด ูุฒูุฏ Stratum 1)ุ  
> ุจุณ ุงูุฃุฌูุฒุฉ ูู ููุณ ุงูุทุจูุฉ ูููู ุชุชูุงุตู ูุน ุจุนุถ ูู **ุฃูุฑุงู (Peers)** ูุฏุนู ุจุนุถ.

---

### โ๏ธ ููู ูุถุจุท NTP ุนูู ุฌูุงุฒ ุณุงูุณููุ (ุฎุทูุงุช ุนูููุฉ)

#### 1. ุดูู ุงูููุช ุงูุญุงูู:
```bash
R1# show clock detail
```
> ุงููุงุชุฌ:  
> `Time source is user configuration` โ ูุนูู ุงูููุช ููุถุจุท ูุฏูููุง.

---

#### 2. ุงุทูุจ ูู ุงูุฌูุงุฒ ูุชุฒุงูู ูุน ุณูุฑูุฑ ููุช:
```bash
R1(config)# ntp server 209.165.200.225
```
- ุงูุฑูู ุฏู ุนููุงู IP ูู **ุณูุฑูุฑ ููุช ุนุงู** (ุฃู ุฎุงุต ูู ุดุจูุชู).
- ุงูุฌูุงุฒ ููุจุฏุฃ ูุฑุณู ุทูุจุงุช ูู ูุชุฑุฉุ ููุถุจุท ุณุงุนุชู ุชููุงุฆููุง.

---

#### 3. ุชุญูู ูู ุงูุชุฒุงูู:
```bash
R1# show clock detail
```
> ุงูุขู ุชูุงูู:  
> `Time source is NTP` โ

```bash
R1# show ntp status
```
> ุชูุงูู:
> ```
> Clock is synchronized, stratum 2, reference is 209.165.200.225
> ```
> โ ุงูุฌูุงุฒ ูุชุฒุงููุ ููู ูู **Stratum 2**.

```bash
R1# show ntp associations
```
> ูุธูุฑ ูู:
> - ููู ุงูุณูุฑูุฑ (IP)
> - Stratum ุงูุฎุงุต ุจู
> - ูู ูู ุงููุตุฏุฑ ุงููุฎุชุงุฑ ุญุงูููุงุ (`*` = ูุนูุ `~` = ููุนุฏู ููุงุชุตุงู)

ูุซุงู:
```
*~209.165.200.225   .GPS.   1   โ ุงูุณูุฑูุฑ Stratum 1ุ ููุชุตู ุจุฌูุงุฒ GPS
```

---

### ๐ ูุซุงู ุดุจูู ูุงูุนู (ูุซู ุงููู ูู ุงูุดุฑุญ):

| ุงูุฌูุงุฒ | ุงูุฏูุฑ | Stratum |
|--------|-------|---------|
| ุณูุฑูุฑ ุงูููุช (209.165.200.225) | ูุชุตู ุจู GPS | Stratum 1 |
| **R1** | ูุชุฒุงูู ูุน ุงูุณูุฑูุฑ | Stratum 2 |
| **S1** | ูุชุฒุงูู ูุน R1 | Stratum 3 |

ุงูุฃูุงูุฑ:
```bash
! ูู R1:
R1(config)# ntp server 209.165.200.225

! ูู S1:
S1(config)# ntp server 192.168.1.1   โ IP ุจุชุงุน R1 ุฏุงุฎูู
```

> ุงูุขู:  
> ูู Logs ูู R1 ู S1 **ุจููุช ูุงุญุฏ** โ ูุนูุฏู ุฎุฑูุทุฉ ุฒูููุฉ ุฏูููุฉ ูุฃู ุญุฏุซ ๐ฏ

---

### ๐ฏ ูููุฒุงุช ููุนูููุงุช ุณุฑูุนุฉ:

| ุงูููุฑุฉ | ุงูุชูุถูุญ |
|--------|---------|
| ๐น NTP **ูุง ูุชุทูุจ ุชูููู ูุนูุฏ** | ุณุทุฑ ูุงุญุฏ: `ntp server x.x.x.x` |
| ๐น ูุนูู ุญุชู ูู **ูุง ููุด DNS** | ูุดุชุบู ุจุงูู IP ูุจุงุดุฑุฉู |
| ๐น ุขููุ | ูููู ุงุณุชุฎุฏุงู **NTP Authentication** (ูุด ูุฐููุฑ ููุงุ ููู ูุชููุฑ) |
| ๐น ุณูุฑูุฑุงุช ุนุงูููุฉ ูุฌุงููุฉ | ูุซู: `pool.ntp.org` ุฃู `time.google.com` (ููู ูู ุดุจูุงุช ุญููููุฉ/ุฎุงุตุฉุ ุจูุณุชุฎุฏููุง ุณูุฑูุฑ ุฏุงุฎูู) |
| ๐น ูู ุงููุทุน ุงูุงุชุตุงูุ | ุงูุฌูุงุฒ ูุฎูู ุงูููุช "ูุณุชูุฑ" (ููุณูู *slew*) ูุญุฏ ูุง ูุฑุฌุน ุงูุงุชุตุงู |

---

### ๐ ููุฎุต ูู 5 ููุงุท (ุนุงูุฒ ุชุญูุธุ ุงุญูุธ ุฏูู):

1. โฐ ุงูููุช ุงููุชูุงุณู = ุฃุณุงุณ ุงุณุชูุดุงู ุงูุฃุนุทุงู ูุชุญููู ุงูุณุฌูุงุช.
2. โ `clock set` = ุญู ูุคูุชุ ูุด ุงุญุชุฑุงูู.
3. ๐ `ntp server X.X.X.X` = ุงูุญู ุงูุฐูู ูุงูุฏุงุฆู.
4. ๐งฑ NTP ุจูุดุชุบู ุจูุธุงู **ุทุจูุงุช (Stratum)** โ Stratum 1 ูู ุงูุฃุฏู ุจุนุฏ ุงููุตุฏุฑ ุงูุญูููู.
5. ๐ ุชุญููู ุจู:  
   - `show clock detail`  
   - `show ntp status`  
   - `show ntp associations`

---

### ๐๏ธ ูุตูุญุฉ ุนูููุฉ ูู Packet Tracer (ุงููู ูู ุขุฎุฑ ุงูุดุฑุญ):

> "Configure NTP on R1 and R2"

#### ุงูุฎุทูุงุช:
1. ูู R1:  
   ```bash
   R1(config)# ntp server 209.165.200.225
   ```
2. ูู R2:  
   ุฅูุง:
   - ูุชุฒุงูู ูุน ููุณ ุงูุณูุฑูุฑ:  
     ```bash
     R2(config)# ntp server 209.165.200.225
     ```
   - ุฃู ูุชุฒุงูู ูุน R1 (ูู R1 ุฃุณุฑุน/ุฃูุฑุจ):  
     ```bash
     R2(config)# ntp server 192.168.1.1   โ IP R1
     ```
3. ุชุญูู ูู ูู ุฌูุงุฒ ุจู:
   ```bash
   show ntp status
   show clock detail
   ```

---

ุฅุฐุง ุญุงุจุจุ ุฃูุฏุฑ ุฃุฑุณู ูู:
- ๐ ุฌุฏูู ููุงุฑูุฉ ุจูู CDP / LLDP / NTP  
- ๐ ุณููุงุฑูู ูุงูู ูู Packet Tracer (ุตูุฑ + ุฃูุงูุฑ)  
- ๐ ููุฎุต PDF ุตุบูุฑ ูููุฑุงุฌุนุฉ ุงูุณุฑูุนุฉ

ุจุณ ูู ูู ๐