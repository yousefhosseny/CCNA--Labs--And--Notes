### OSPF Router ID
القسم ده بيتكلم عن "معرف الراوتر" (Router ID) في OSPF، اللي هو رقم يحدد كل راوتر فريداً زي بطاقة هوية. ده مهم عشان الراوترات تتواصل وتنتخب قيادة في الشبكة.

#### التوبولوجي المرجعي (Reference Topology)
- رسم بسيط لشبكة: راوترات R1، R2، R3 متصلة، وكلها في منطقة OSPF الرئيسية (backbone area 0)، ما عدا loopback 1 على R2.
- مفيش توجيه حالي (لا static ولا dynamic).
- الISP راوتر كبوابة للإنترنت.
- الواجهات كلها لها عناوين IP جاهزة.

#### تفعيل OSPF
- الأمر: `router ospf process-id` في وضع config.
- Process-ID: رقم من 1 لـ 65535، اختاره الإداري، ومحلي (مش لازم نفس الرقم على كل الراوترات، لكن يفضل).
- مثال: `router ospf 10`، ثم تدخل وضع config-router، وفيه أوامر زي area، network، إلخ.

#### ما هو Router ID؟
- رقم 32-bit زي عنوان IPv4 (مثال: 1.1.1.1).
- يروح في كل حزم OSPF عشان يعرف المرسل.
- لازم لكل راوتر عشان يشارك في OSPF.
- استخدامات:
  - في مزامنة قواعد البيانات (LSDB): الراوتر مع أعلى ID يرسل DBD أولاً.
  - في انتخاب DR وBDR: في شبكات متعددة الوصول، أعلى ID يبقى DR (رئيسي)، والتاني BDR (مساعد).

#### كيف يختار الراوتر ID؟ (أولوية الاختيار)
ء Cisco يختار بناءً على 3 قواعد، بالترتيب ده:

1. **يدوي (موصى به)**: أمر `router-id rid` (rid زي 1.1.1.1).
2. **أعلى عنوان loopback**: لو في loopback interfaces.
3. **أعلى عنوان physical interface نشيط**: لو مفيش اللي فوق.

#### استخدام Loopback كـ Router ID
- بدل الاعتماد على واجهة فيزيائية (اللي ممكن تتعطل)، حدد loopback مع /32 mask (255.255.255.255)، ده يعمل host route مش هيتنشر.
- مش لازم تفعل OSPF على الloopback ده.

#### مثال في التوبولوجي
- R1: 1.1.1.1
- R2: 2.2.2.2
- R3: 3.3.3.3
- أمر: `router ospf 10` ثم `router-id 1.1.1.1`
- تحقق: `show ip protocols | include Router ID` يظهر الID.

#### تعديل Router ID
- لو الراوتر اختار ID بالفعل، مش هيتغير إلا لو reload الراوتر أو reset OSPF بـ `clear ip ospf process` (يفضل ده).
- مثال: لو غيرت، هيقولك اعمل clear، وهيفقد الجوار مؤقتاً ثم يرجع.

باختصار، Router ID زي اسم الراوتر في OSPF، اختاره يدوي عشان السيطرة، وهو يساعد في التنسيق والانتخابات. لو عايز أمثلة كود أو رسم، قل!