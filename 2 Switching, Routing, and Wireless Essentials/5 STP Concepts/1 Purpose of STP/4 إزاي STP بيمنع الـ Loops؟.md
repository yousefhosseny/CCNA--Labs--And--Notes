
### 4. **إزاي STP بيمنع الـ Loops؟**
STP بيستخدم خوارزمية (Spanning Tree Algorithm - STA) عشان يعمل شبكة خالية من الـ Loops:
1. **اختيار Root Bridge**:
   - بيختار سويتش واحد في الشبكة يكون الـ Root Bridge (زي نقطة مرجعية).
   - كل السويتشات التانية بتحسب أقل مسار تكلفة (Least-Cost Path) للوصول للـ Root Bridge.
2. **حجب المسارات الزيادة**:
   - STP بيحدد المسارات الزيادة ويحجبها (يخلي المنافذ في حالة Blocking)، فالبيانات مابتعديش منها.
   - ده بيضمن إن فيه مسار واحد بس بين أي جهازين.
3. **إنشاء شبكة خالية من الـ Loops**:
   - المنافذ المحجوبة بتخلي الشبكة زي شجرة، كل سويتش ليه مسار واحد للـ Root Bridge.
4. **إعادة الحساب في حالة العطل**:
   - لو فيه عطل (زي كابل أو سويتش باظ)، STP بيعيد حساب المسارات ويفتح منافذ كانت محجوبة عشان يستخدم مسار بديل.

---
![[Pasted image 20250908213027.png]]
