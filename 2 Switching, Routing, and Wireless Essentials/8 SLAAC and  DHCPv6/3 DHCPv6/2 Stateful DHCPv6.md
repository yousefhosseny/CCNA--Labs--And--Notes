
### 2. **Stateful DHCPv6**
- **الفكرة**: الجهاز بياخد كل إعداداته (عنوان GUA والإعدادات الإضافية زي DNS) من سيرفر DHCPv6 مباشرة، من غير ما يستخدم SLAAC.
- **السيرفر**: بيحتفظ بسجل عناوين IP (Stateful) زي DHCPv4.
- **إزاي بيشتغل؟**
  - الراوتر بيبعت رسالة RA فيها:
    - **A Flag = 0**: يعني الجهاز مش هيستخدم SLAAC.
    - **O Flag = 0**: يعني مافيش إعدادات إضافية من Stateless DHCPv6.
    - **M Flag = 1**: يقول للجهاز ياخد كل الإعدادات من سيرفر DHCPv6.
  - الجهاز بيبعت رسالة **DHCPv6 SOLICIT** للسيرفر عشان ياخد عنوان GUA وكل الإعدادات.
- **تفعيل Stateful DHCPv6**:
  - على الراوتر، بنستخدم الأمر: `ipv6 nd managed-config-flag` عشان نضبط الـ M Flag على 1.

![[Pasted image 20250908215208.png]]
